@page "/"
@inject IContentListLoader Loader

<MudGrid Class="mt-4">
    <MudItem xs="12" sm="12" md="12">
        <MudText Typo="Typo.h3">Blazorblog</MudText>
        <MudText Typo="Typo.subtitle1">Static without Server or DB</MudText>
    </MudItem>
    @if (_loading)
    {
        <MudItem xs="12">
            <MudCard>
                <MudSkeleton SkeletonType="SkeletonType.Rectangle" Height="200px" />
                <MudCardContent>
                    <MudSkeleton Width="30%" Height="42px;" />
                    <MudSkeleton Width="80%" />
                    <MudSkeleton Width="100%" />
                </MudCardContent>
                <MudCardActions>
                    <MudSkeleton Width="64px" Height="40px" Class="ml-2" />
                </MudCardActions>
            </MudCard>
        </MudItem>
    }
    @foreach (var item in ContentList)
    {
        <MudItem xs="12">
            <MudCard @key="item">
                <MudCardHeader>
                    <MudText Typo="Typo.h4">@item.Title</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <MudText>@((MarkupString)item.ContentSnippet)</MudText>
                </MudCardContent>
                <MudCardActions>
                    <MudLink Href=@($"/Entry/{item.Id}")>Read more...</MudLink>
                </MudCardActions>
            </MudCard>
        </MudItem>
    }

</MudGrid>

@code {

    private IndexEntryModel[] ContentList { get; set; } = Array.Empty<IndexEntryModel>();
    bool _loading = true;

    protected override async Task OnInitializedAsync()
    {
        ContentList = await Loader.GetContentListAsync();
        _loading = false;
    }
}